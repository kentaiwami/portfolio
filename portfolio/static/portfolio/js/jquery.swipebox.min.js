/*! Swipebox v1.4.4 | Constantin Saguin csag.co | MIT License | github.com/brutaldesign/swipebox */
(function(b,a,c,d){c.swipebox=function(i,r){var q,l={useCSS:true,useSVG:true,initialIndexOnArray:0,removeBarsOnMobile:true,hideCloseButtonOnMobile:false,hideBarsDelay:3000,videoMaxWidth:1140,vimeoColor:"cccccc",beforeOpen:null,afterOpen:null,afterClose:null,afterMedia:null,nextSlide:null,prevSlide:null,loopAtEnd:false,autoplayVideos:false,queryStringData:{},toggleClassOnLoad:"",selector:null},o=this,e=[],f,p=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i),k=p!==null||a.createTouch!==d||("ontouchstart" in b)||("onmsgesturechange" in b)||navigator.msMaxTouchPoints,m=!!a.createElementNS&&!!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,h=b.innerWidth?b.innerWidth:c(b).width(),j=b.innerHeight?b.innerHeight:c(b).height(),g=0,n='<div id="swipebox-overlay">					<div id="swipebox-container">						<div id="swipebox-slider"></div>						<div id="swipebox-top-bar">							<div id="swipebox-title"></div>						</div>						<div id="swipebox-bottom-bar">							<div id="swipebox-arrows">								<a id="swipebox-prev"></a>								<a id="swipebox-next"></a>							</div>						</div>						<a id="swipebox-close"></a>					</div>			</div>';
o.settings={};c.swipebox.close=function(){q.closeSlide();};c.swipebox.extend=function(){return q;};o.init=function(){o.settings=c.extend({},l,r);if(c.isArray(i)){e=i;
q.target=c(b);q.init(o.settings.initialIndexOnArray);}else{c(i).on("click",o.settings.selector,function(u){if(u.target.parentNode.className==="slide current"){return false;
}q.destroy();if(o.settings.selector===null){f=c(i);}else{f=c(i).find(o.settings.selector);}e=[];var s,t,v;if(!v){t="data-rel";v=c(this).attr(t);}if(!v){t="rel";
v=c(this).attr(t);}if(v&&v!==""&&v!=="nofollow"){f=f.filter("["+t+'="'+v+'"]');}f.each(function(){var x=null,w=null;if(c(this).attr("title")){x=c(this).attr("title");
}if(c(this).attr("href")){w=c(this).attr("href");}e.push({href:w,title:x});});s=f.index(c(this));u.preventDefault();u.stopPropagation();q.target=c(u.target);
q.init(s);});}};q={init:function(s){if(o.settings.beforeOpen){o.settings.beforeOpen();}this.target.trigger("swipebox-start");c.swipebox.isOpen=true;this.build();
this.openSlide(s);this.openMedia(s);this.preloadMedia(s+1);this.preloadMedia(s-1);if(o.settings.afterOpen){o.settings.afterOpen(s);}},build:function(){var t=this,s;
c("body").append(n);if(m&&o.settings.useSVG===true){s=c("#swipebox-close").css("background-image");s=s.replace("png","svg");c("#swipebox-prev, #swipebox-next, #swipebox-close").css({"background-image":s});
}if(p&&o.settings.removeBarsOnMobile){c("#swipebox-bottom-bar, #swipebox-top-bar").remove();}c.each(e,function(){c("#swipebox-slider").append('<div class="slide"></div>');
});t.setDim();t.actions();if(k){t.gesture();}t.keyboard();t.animBars();t.resize();},setDim:function(){var u,s,t={};if("onorientationchange" in b){b.addEventListener("orientationchange",function(){if(b.orientation===0){u=h;
s=j;}else{if(b.orientation===90||b.orientation===-90){u=j;s=h;}}},false);}else{u=b.innerWidth?b.innerWidth:c(b).width();s=b.innerHeight?b.innerHeight:c(b).height();
}t={width:u,height:s};c("#swipebox-overlay").css(t);},resize:function(){var s=this;c(b).resize(function(){s.setDim();}).resize();},supportTransition:function(){var t="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" "),s;
for(s=0;s<t.length;s++){if(a.createElement("div").style[t[s]]!==d){return t[s];}}return false;},doCssTrans:function(){if(o.settings.useCSS&&this.supportTransition()){return true;
}},gesture:function(){var C=this,B,E,D,v,x,z,w=false,u=false,y=10,A=50,F={},s={},G=c("#swipebox-top-bar, #swipebox-bottom-bar"),t=c("#swipebox-slider");
G.addClass("visible-bars");C.setTimeout();c("body").bind("touchstart",function(H){c(this).addClass("touching");B=c("#swipebox-slider .slide").index(c("#swipebox-slider .slide.current"));
s=H.originalEvent.targetTouches[0];F.pageX=H.originalEvent.targetTouches[0].pageX;F.pageY=H.originalEvent.targetTouches[0].pageY;c("#swipebox-slider").css({"-webkit-transform":"translate3d("+g+"%, 0, 0)",transform:"translate3d("+g+"%, 0, 0)"});
c(".touching").bind("touchmove",function(J){J.preventDefault();J.stopPropagation();s=J.originalEvent.targetTouches[0];if(!u){x=D;D=s.pageY-F.pageY;if(Math.abs(D)>=A||w){var I=0.75-Math.abs(D)/t.height();
t.css({top:D+"px"});t.css({opacity:I});w=true;}}v=E;E=s.pageX-F.pageX;z=E*100/h;if(!u&&!w&&Math.abs(E)>=y){c("#swipebox-slider").css({"-webkit-transition":"",transition:""});
u=true;}if(u){if(0<E){if(0===B){c("#swipebox-overlay").addClass("leftSpringTouch");}else{c("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch");
c("#swipebox-slider").css({"-webkit-transform":"translate3d("+(g+z)+"%, 0, 0)",transform:"translate3d("+(g+z)+"%, 0, 0)"});}}else{if(0>E){if(e.length===B+1){c("#swipebox-overlay").addClass("rightSpringTouch");
}else{c("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch");c("#swipebox-slider").css({"-webkit-transform":"translate3d("+(g+z)+"%, 0, 0)",transform:"translate3d("+(g+z)+"%, 0, 0)"});
}}}}});return false;}).bind("touchend",function(H){H.preventDefault();H.stopPropagation();c("#swipebox-slider").css({"-webkit-transition":"-webkit-transform 0.4s ease",transition:"transform 0.4s ease"});
D=s.pageY-F.pageY;E=s.pageX-F.pageX;z=E*100/h;if(w){w=false;if(Math.abs(D)>=2*A&&Math.abs(D)>Math.abs(x)){var I=D>0?t.height():-t.height();t.animate({top:I+"px",opacity:0},300,function(){C.closeSlide();
});}else{t.animate({top:0,opacity:1},300);}}else{if(u){u=false;if(E>=y&&E>=v){C.getPrev();}else{if(E<=-y&&E<=v){C.getNext();}}}else{if(!G.hasClass("visible-bars")){C.showBars();
C.setTimeout();}else{C.clearTimeout();C.hideBars();}}}c("#swipebox-slider").css({"-webkit-transform":"translate3d("+g+"%, 0, 0)",transform:"translate3d("+g+"%, 0, 0)"});
c("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch");c(".touching").off("touchmove").removeClass("touching");});},setTimeout:function(){if(o.settings.hideBarsDelay>0){var s=this;
s.clearTimeout();s.timeout=b.setTimeout(function(){s.hideBars();},o.settings.hideBarsDelay);}},clearTimeout:function(){b.clearTimeout(this.timeout);this.timeout=null;
},showBars:function(){var s=c("#swipebox-top-bar, #swipebox-bottom-bar");if(this.doCssTrans()){s.addClass("visible-bars");}else{c("#swipebox-top-bar").animate({top:0},500);
c("#swipebox-bottom-bar").animate({bottom:0},500);setTimeout(function(){s.addClass("visible-bars");},1000);}},hideBars:function(){var s=c("#swipebox-top-bar, #swipebox-bottom-bar");
if(this.doCssTrans()){s.removeClass("visible-bars");}else{c("#swipebox-top-bar").animate({top:"-50px"},500);c("#swipebox-bottom-bar").animate({bottom:"-50px"},500);
setTimeout(function(){s.removeClass("visible-bars");},1000);}},animBars:function(){var t=this,s=c("#swipebox-top-bar, #swipebox-bottom-bar");s.addClass("visible-bars");
t.setTimeout();c("#swipebox-slider").click(function(){if(!s.hasClass("visible-bars")){t.showBars();t.setTimeout();}});c("#swipebox-bottom-bar").hover(function(){t.showBars();
s.addClass("visible-bars");t.clearTimeout();},function(){if(o.settings.hideBarsDelay>0){s.removeClass("visible-bars");t.setTimeout();}});},keyboard:function(){var s=this;
c(b).bind("keyup",function(t){t.preventDefault();t.stopPropagation();if(t.keyCode===37){s.getPrev();}else{if(t.keyCode===39){s.getNext();}else{if(t.keyCode===27){s.closeSlide();
}}}});},actions:function(){var t=this,s="touchend click";if(e.length<2){c("#swipebox-bottom-bar").hide();if(d===e[1]){c("#swipebox-top-bar").hide();}}else{c("#swipebox-prev").bind(s,function(u){u.preventDefault();
u.stopPropagation();t.getPrev();t.setTimeout();});c("#swipebox-next").bind(s,function(u){u.preventDefault();u.stopPropagation();t.getNext();t.setTimeout();
});}c("#swipebox-close").bind(s,function(){t.closeSlide();});},setSlide:function(t,s){s=s||false;var u=c("#swipebox-slider");g=-t*100;if(this.doCssTrans()){u.css({"-webkit-transform":"translate3d("+(-t*100)+"%, 0, 0)",transform:"translate3d("+(-t*100)+"%, 0, 0)"});
}else{u.animate({left:(-t*100)+"%"});}c("#swipebox-slider .slide").removeClass("current");c("#swipebox-slider .slide").eq(t).addClass("current");this.setTitle(t);
if(s){u.fadeIn();}c("#swipebox-prev, #swipebox-next").removeClass("disabled");if(t===0){c("#swipebox-prev").addClass("disabled");}else{if(t===e.length-1&&o.settings.loopAtEnd!==true){c("#swipebox-next").addClass("disabled");
}}},openSlide:function(s){c("html").addClass("swipebox-html");if(k){c("html").addClass("swipebox-touch");if(o.settings.hideCloseButtonOnMobile){c("html").addClass("swipebox-no-close-button");
}}else{c("html").addClass("swipebox-no-touch");}c(b).trigger("resize");this.setSlide(s,true);},preloadMedia:function(s){var t=this,u=null;if(e[s]!==d){u=e[s].href;
}if(!t.isVideo(u)){setTimeout(function(){t.openMedia(s);},1000);}else{t.openMedia(s);}},openMedia:function(t){var u=this,v,s;if(e[t]!==d){v=e[t].href;}if(t<0||t>=e.length){return false;
}s=c("#swipebox-slider .slide").eq(t);if(!u.isVideo(v)){s.addClass("slide-loading");u.loadMedia(v,function(){s.removeClass("slide-loading");s.html(this);
if(o.settings.afterMedia){o.settings.afterMedia(t);}});}else{s.html(u.getVideo(v));if(o.settings.afterMedia){o.settings.afterMedia(t);}}},setTitle:function(s){var t=null;
c("#swipebox-title").empty();if(e[s]!==d){t=e[s].title;}if(t){c("#swipebox-top-bar").show();c("#swipebox-title").append(t);}else{c("#swipebox-top-bar").hide();
}},isVideo:function(s){if(s){if(s.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||s.match(/vimeo\.com\/([0-9]*)/)||s.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)){return true;
}if(s.toLowerCase().indexOf("swipeboxvideo=1")>=0){return true;}}},parseUri:function(u,v){var t=a.createElement("a"),s={};t.href=decodeURIComponent(u);
if(t.search){s=JSON.parse('{"'+t.search.toLowerCase().replace("?","").replace(/&/g,'","').replace(/=/g,'":"')+'"}');}if(c.isPlainObject(v)){s=c.extend(s,v,o.settings.queryStringData);
}return c.map(s,function(x,w){if(x&&x>""){return encodeURIComponent(w)+"="+encodeURIComponent(x);}}).join("&");},getVideo:function(u){var w="",t=u.match(/((?:www\.)?youtube\.com|(?:www\.)?youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/),v=u.match(/(?:www\.)?youtu\.be\/([a-zA-Z0-9\-_]+)/),x=u.match(/(?:www\.)?vimeo\.com\/([0-9]*)/),s="";
if(t||v){if(v){t=v;}s=q.parseUri(u,{autoplay:(o.settings.autoplayVideos?"1":"0"),v:""});w='<iframe width="560" height="315" src="//'+t[1]+"/embed/"+t[2]+"?"+s+'" frameborder="0" allowfullscreen></iframe>';
}else{if(x){s=q.parseUri(u,{autoplay:(o.settings.autoplayVideos?"1":"0"),byline:"0",portrait:"0",color:o.settings.vimeoColor});w='<iframe width="560" height="315"  src="//player.vimeo.com/video/'+x[1]+"?"+s+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';
}else{w='<iframe width="560" height="315" src="'+u+'" frameborder="0" allowfullscreen></iframe>';}}return'<div class="swipebox-video-container" style="max-width:'+o.settings.videoMaxWidth+'px"><div class="swipebox-video">'+w+"</div></div>";
},loadMedia:function(t,u){if(t.trim().indexOf("#")===0){u.call(c("<div>",{"class":"swipebox-inline-container"}).append(c(t).clone().toggleClass(o.settings.toggleClassOnLoad)));
}else{if(!this.isVideo(t)){var s=c("<img>").on("load",function(){u.call(s);});s.attr("src",t);}}},getNext:function(){var t=this,u,s=c("#swipebox-slider .slide").index(c("#swipebox-slider .slide.current"));
if(s+1<e.length){u=c("#swipebox-slider .slide").eq(s).contents().find("iframe").attr("src");c("#swipebox-slider .slide").eq(s).contents().find("iframe").attr("src",u);
s++;t.setSlide(s);t.preloadMedia(s+1);if(o.settings.nextSlide){o.settings.nextSlide(s);}}else{if(o.settings.loopAtEnd===true){u=c("#swipebox-slider .slide").eq(s).contents().find("iframe").attr("src");
c("#swipebox-slider .slide").eq(s).contents().find("iframe").attr("src",u);s=0;t.preloadMedia(s);t.setSlide(s);t.preloadMedia(s+1);if(o.settings.nextSlide){o.settings.nextSlide(s);
}}else{c("#swipebox-overlay").addClass("rightSpring");setTimeout(function(){c("#swipebox-overlay").removeClass("rightSpring");},500);}}},getPrev:function(){var s=c("#swipebox-slider .slide").index(c("#swipebox-slider .slide.current")),t;
if(s>0){t=c("#swipebox-slider .slide").eq(s).contents().find("iframe").attr("src");c("#swipebox-slider .slide").eq(s).contents().find("iframe").attr("src",t);
s--;this.setSlide(s);this.preloadMedia(s-1);if(o.settings.prevSlide){o.settings.prevSlide(s);}}else{c("#swipebox-overlay").addClass("leftSpring");setTimeout(function(){c("#swipebox-overlay").removeClass("leftSpring");
},500);}},nextSlide:function(s){},prevSlide:function(s){},closeSlide:function(){c("html").removeClass("swipebox-html");c("html").removeClass("swipebox-touch");
c(b).trigger("resize");this.destroy();},destroy:function(){c(b).unbind("keyup");c("body").unbind("touchstart");c("body").unbind("touchmove");c("body").unbind("touchend");
c("#swipebox-slider").unbind();c("#swipebox-overlay").remove();if(!c.isArray(i)){i.removeData("_swipebox");}if(this.target){this.target.trigger("swipebox-destroy");
}c.swipebox.isOpen=false;if(o.settings.afterClose){o.settings.afterClose();}}};o.init();};c.fn.swipebox=function(f){if(!c.data(this,"_swipebox")){var e=new c.swipebox(this,f);
this.data("_swipebox",e);}return this.data("_swipebox");};}(window,document,jQuery));