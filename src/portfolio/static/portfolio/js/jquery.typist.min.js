(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a);}else{a(jQuery);}}(function(b){b.fn.typistInit=function(){return this.each(function(){if(!b(this).data("typist")){new a(this);
}});};b.fn.typist=function(c){return this.each(function(){new a(this,c);});};b.fn.typistAdd=function(c,d){return this.typistInit().each(function(){var e=b(this).data("typist");
e.queue.push({text:c,callback:d});e.type();});};b.fn.typistRemove=function(c,d){c=parseInt(c)||0;return this.typistInit().each(function(){var e=b(this).data("typist");
e.queue.push({remove:c,callback:d});e.type();});};b.fn.typistPause=function(c,d){c=parseInt(c)||0;return this.typistInit().each(function(){var e=b(this).data("typist");
e.queue.push({delay:c,callback:d});e.type();});};b.fn.typistStop=function(){return this.typistInit().each(function(){var c=b(this).data("typist");c.queue.push({stop:true});
c.type();});};function a(c,d){b.extend(this,{speed:10,text:"",cursor:true,blinkSpeed:2,typeFrom:"end",cursorStyles:{display:"inline-block",fontStyle:"normal",margin:"-2px 2px 0 2px"}},d||{});
this._cursor=null;this._element=b(c);this._element.data("typist",this);this._container=null;this.queue=[];this.timer=null;this.delay=1000/this.speed;this.blinkTimer=null;
this.blinkDelay=1000/this.blinkSpeed;if(this.text){this.queue.push({text:this.text});this.type();}}a.prototype={addCursor:function(){if(this._cursor){clearInterval(this.blinkTimer);
this._cursor.stop().remove();}this._cursor=b("<span>|</span>").css(this.cursorStyles).insertAfter(this._container);this.cursorVisible=true;this.blinkTimer=setInterval(b.proxy(function(){this.cursorVisible=!this.cursorVisible;
this._cursor.animate({opacity:this.cursorVisible?1:0},100);},this),this.blinkDelay);},fire:function(c){this._element.trigger(c,this);return this;},nl2br:function(c){return c.replace(/\n/g,"<br>");
},br2nl:function(c){return c.replace(/<br.*?>/g,"\n");},remove:function(c,e){if(c<=0){e();this.timer=null;return this.fire("end_remove.typist").type();
}var d=this._container.html();c--;d=this.br2nl(d);d=d.substr(0,d.length-1);d=this.nl2br(d);this.timer=setTimeout(b.proxy(function(){this._container.html(d);
this.remove(c,e);},this),this.delay);this.fire("tick.typist");},step:function(d,e){if(typeof d==="string"){d=d.split("");}if(!d.length){e();this.timer=null;
return this.fire("end_type.typist").type();}var c=d.shift();c=b("<div>").text(c).html();c=this.nl2br(c);this.timer=setTimeout(b.proxy(function(){this._container.html(this._container.html()+c);
this.step(d,e);},this),this.delay);this.fire("tick.typist");},stop:function(){clearInterval(this.blinkTimer);this.blinkTimer=null;if(this._cursor){this._cursor.remove();
this._cursor=null;}clearTimeout(this.timer);this.timer=null;},type:function(){if(this.timer){return;}if(!this._container){this._container=b("<span>");if(this.typeFrom==="start"){this._element.prepend(this._container);
}else{this._element.append(this._container);}}if(this.cursor){this.addCursor();}var c=this.queue.shift()||{},d=b.proxy(c.callback||b.noop,this);if(c.delay){this.fire("start_pause.typist").timer=setTimeout(b.proxy(function(){d();
this.timer=null;this.fire("end_pause.typist").type();},this),c.delay);return;}else{if(c.remove){this.fire("start_remove.typist").remove(c.remove,d);return;
}else{if(c.stop){this.stop();return;}}}if(!c.text){return;}this.fire("start_type.typist").step(c.text,d);}};}));